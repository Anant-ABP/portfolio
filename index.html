<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Anant Panjari Portfolio</title>

  <!-- external libs -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    /* ======= YOUR PROVIDED CSS (verbatim + small overlay/intro additions) ======= */
    html { scroll-behavior: smooth; }
    body { background: #000; color: #fff; font-family: Arial, sans-serif; margin: 0; padding: 0; position: relative; }

    /* Starfield canvas */
    #starfield { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; background: #000; }
    .content-wrapper { position: relative; z-index: 1; }

    /* Section cards */
    .section-card { background: linear-gradient(to bottom right, #1a0033, #4b0082); border-radius: 15px; padding: 20px; margin: 20px auto; max-width: 900px; }
    .section-title { text-align: center; margin-bottom: 20px; font-weight: bold;box-shadow: 0 0 20px rgba(128,0,255,0.6); }

    /* Hero */
    .hero { background: linear-gradient(to bottom right, #1a0033, #4b0082); border-radius: 10px; margin: 90px auto 20px auto; padding: 40px 20px; max-width: 900px; display: flex; justify-content: space-between; align-items: center;box-shadow: 0 0 20px rgba(128,0,255,0.6); }
    .hero-text h2 { color: #ff66ff;}
    .hero-text p {max-width: 520px;line-height: 1.5;}
    .animated-name { font-weight: bold; background: linear-gradient(90deg, #8a2be2, #ffffff, #8a2be2); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; background-size: 200% auto; animation: shine 3s linear infinite; }
    @keyframes shine { 0% { background-position: 200% center; } 100% { background-position: -200% center; } }

    .profile-photo {
      width: 120px;
      height: 120px;
      border-radius: 24%;
      object-fit: cover;
      transition: transform 0.3s ease;
      cursor: pointer;
    }
    .profile-photo:hover { transform: scale(1.6); }

    /* Social icons */
    .social-container { background: linear-gradient(to right, #1a0033, #6a0dad); border-radius: 30px; padding: 10px 20px; text-align: center; margin: 20px auto; display: inline-block;display: flex;justify-content: center; gap: 25px; max-width: 600px;width: 90%;padding: 15px 25px;box-shadow: 0 0 20px rgba(128,0,255,0.6); }
    .social-container a { color: #fff; font-size: 18px; margin: 0 10px; }
    .social-container a:hover { color: #ff66ff; }

    /* Projects */
    #projects {
      margin-bottom: 60px;
      box-shadow: 0 0 20px rgba(128,0,255,0.6);
    }
    
    .project-images img {
      background: #999;
      width: 100%;
      border-radius: 10px;
      transition: transform 0.4s ease, box-shadow 0.4s ease; /* smooth zoom */
      cursor: pointer;
    }
    
    .project-images img:hover {
      transform: scale(1.4); /* zoom effect */
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* optional shadow */
      z-index: 2;
    }
    /* Skills */
    #skills {
      box-shadow: 0 0 20px rgba(128,0,255,0.6); /* same as projects & certificates */
    }
    
    .skills-icons { text-align: center; }
    .skills-icons img { width: 60px; margin: 10px; }
    .soft-skills { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px;padding: 10px }

    /* Certificates new design */
    .certificate-container {
      background: linear-gradient(180deg, #2e004f, #5b00a0);
      border-radius: 20px;
      padding: 30px;
      max-width: 700px;
      margin: 40px auto;
      color: white;
      text-align: center;
      box-shadow: 0 0 20px rgba(128,0,255,0.6);
    }
    #certificates {
      margin-top: 80px; /* push Certificates lower */
    }
    
    .certificate-container {
      max-width: 900px; /* make same width as Skills */
    }
    #projects .certificate-item {
      list-style: none;
      padding: 12px 0;
      margin: 0 0;
    }
    #projects .certificate-item .cert-title {
      padding-left: 5px;
    }

    .certificate-list {
      list-style: none;
      padding: 20px;
      margin: 20px;
    }
    
    .certificate-list li {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 20px 0;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }
    
    .certificate-list li:last-child {
      border-bottom: none;
    }
    
    .certificate-list span {
      flex: 1;
      text-align: left;
      margin-right: 15px;
    }
    
    /* Achievements Section - Fixed to match Skills section style */
    .achievement-container {
      background: linear-gradient(to bottom right, #1a0033, #4b0082);
      border-radius: 15px;
      padding: 20px;
      margin: 45px auto;
      max-width: 900px;
      box-shadow: 0 0 20px rgba(128,0,255,0.6);
    }
    
    .achievement-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 25px;
    }
    
    .achievement-text {
      flex: 1;
    }
    
    .achievement-text ul {
      padding-left: 20px;
    }
    
    .achievement-text li {
      margin-bottom: 10px;
      line-height: 1.5rem;
    }
    
    .achievement-img {
      width: 220px;
      height: 180px;
      background: #444;
      border-radius: 12px;
      object-fit: cover;
      transition: transform 0.3s ease;
      cursor: pointer;
      box-shadow: 0 0 10px rgba(128, 0, 255, 0.5);
    }
    .achievement-img:hover { transform: scale(1.4); }

    
    .btn-view {
      background: #9b30ff;
      color: white;
      padding: 6px 16px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: bold;
      transition: background 0.3s;
    }
    
    .btn-view:hover {
      background: #bf00ff;
    }


    /* Contact */
    .btn-submit { background: linear-gradient(to right, #6a0dad, #ff00ff); border: none; color: #fff; padding: 10px 30px; border-radius: 20px; }
    .custom-input { height: 35px; font-size: 14px; padding: 5px 10px; }
    .custom-textarea { font-size: 14px; padding: 8px 10px; resize: none; }

    section { padding-top: 50px; }
    .footer {
  background: #111; /* Dark background */
  color: #fff;
  padding: 20px 0;
  font-size: 15px;
}

.footer i {
  margin-right: 8px;
  color: #fff;
}

.footer p {
  margin: 5px 0;
}

.footer .made-by {
  font-size: 16px;
}

.footer .made-by .name {
  color: #ffffff; /* Purple text like in your screenshot */
  font-weight: 500;
}
/* Scroll Reveal Animation */
.reveal {
  opacity: 0;
  transform: scale(1.1);
  transition: all 0.50s ease-out;

}

.reveal.active {
  opacity: 1;
  transform: scale(1);
}
/* ===== PARALLAX EFFECTS ===== */

/* Section parallax slow upward motion */
.parallax-section {
  transform: translateY(40px);
  transition: transform 0.65s ease-out;

}

.parallax-section.active {
  transform: translateY(0px);
}

/* Image parallax (slides up slightly) */
.parallax-img {
  transform: translateY(30px);
  transition: transform 0.75s ease-out;

}

.parallax-img.active {
  transform: translateY(0px);
}

/* Background parallax */
body {
  --scrollY: 0px;
}

#starfield {
  transform: translateY(calc(var(--scrollY) * 0.15));
}
#spaceshipCanvas { 
    position: fixed; 
    top:0; 
    left:0; 
    width:100%; 
    height:100%; 
    z-index: 1;
    pointer-events:none; 
}

/* ===== Intro overlay & portal animation (added) ===== */
#introOverlay {
  position: fixed;
  inset: 0;
  background: #000;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.intro-center {
  text-align: center;
  color: #fff;
  user-select: none;
}

.intro-title {
  font-size: 6rem;
  font-weight: 900;
  letter-spacing: 4px;
  opacity: 0;
  transform: scale(0.9);
}

.intro-sub {
  font-weight: 600;
  margin-top: 12px;
  font-size: 6rem;
  opacity: 0;
}

.intro-fadeout {
  animation: fadeOut 0.6s ease forwards 0.4s;
}

/* LINE BASE */
#introLine {
  position: absolute;
  top: 50%;             /* adjust if needed */
  left: 0;
  width: 0;
  height: 3px;
  background: rgb(222, 13, 13);
  opacity: 0;
}

/* LINE DRAW ANIMATION */
#introLine.draw {
  opacity: 1;
  animation: drawLine 0.8s ease-out forwards;
}

@keyframes drawLine {
  from { width: 0; }
  to { width: 100vw; }
}

@keyframes fadeOut {
  to { opacity: 0; visibility: hidden; transform: scale(1.03); }
}
#glassShatter {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 999;
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  grid-template-rows: repeat(4, 1fr);
  opacity: 0;
}
#glassShatter div {
  border: 1px solid rgba(255,255,255,0.05);
  background: rgba(255,255,255,0.02);
  backdrop-filter: blur(2px);
  transition: transform 1s ease, opacity 1s ease;
}
#glassShatter.active {
  opacity: 1;
}
#glassShatter.active div {
  opacity: 0;
  transform: translate(0, 0) rotate(0deg);
}
  </style>
</head>

<body>
  <!-- Intro overlay -->
  <div id="introOverlay" aria-hidden="true">
    <div id="glassShatter"></div>
    <div class="intro-center" id="introCenter">
      <span id="introLine"></span> 
      <span id="bankaiText" class="intro-title">Bankai</span>
      <span id="infinityText" class="intro-sub">Infinity Space</span>
    </div>
  </div>
  <!-- Starfield -->
  <canvas id="starfield"></canvas>
  <!-- Spaceships 3D Canvas -->
  <canvas id="spaceshipCanvas"></canvas>

  <!-- Content (your site) -->
  <div class="content-wrapper" id="mainContent" style="visibility:hidden; pointer-events:none;" >
    <!-- Hero Section -->
    <section id="home" class="hero">
      <div class="hero-text">
        <h3><span class="animated-name">Hi! Anant Panjari Here!</span></h3>
        <p>Hi! I am a passionate Level Designer and UI/UX Designer.  
          I create engaging and immersive game levels with a strong focus on user experience.</p>
      </div>
      <img src="photos/anant.png" alt="Anant Panjari" class="profile-photo">
    </section>

    <!-- Social Icons -->
    <div class="text-center">
      <div class="social-container">
        <a href="https://www.linkedin.com/in/anant-panjari-849652225/" target="_blank"><i class="fab fa-linkedin"></i></a>
        <a href="https://www.instagram.com/anant_abp07/" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://github.com/Anant-ABP" target="_blank"><i class="fab fa-github"></i></a>
        <a href="https://www.facebook.com/profile.php?id=100080064232413" target="_blank"><i class="fab fa-facebook"></i></a>
        <a href="https://x.com/abp_anant28" target="_blank"><i class="fab fa-x-twitter"></i></a>
        <a href="https://www.youtube.com/@anantabp6467" target="_blank"><i class="fab fa-youtube"></i></a>
      </div>
    </div>

    <!-- Projects Section -->
    <section id="projects" class="section-card reveal">
      <h3 class="section-title">Projects</h3>
      <br>
      <h3>Survive :</h3>
      <h6>A first person survival Horror game where the player is stucked inside 
        a old house and to escape from the house he need to find all six digit code.</h6>
      <div class="row project-images mb-4">
        <div class="col-md-4"><img src="photos/survive-1.png" alt="Space Shooter"></div>
        <div class="col-md-4"><img src="photos/survive-2.png" alt="Space Shooter"></div>
        <div class="col-md-4"><img src="photos/survive-3.png" alt="Space Shooter"></div>
      </div>
      
      <li class="certificate-item">
        <span class="cert-title">You can download the game here ðŸ‘‰</span>
        <a href="https://anant-panjari.itch.io/survive" target="_blank" class="btn-view">View</a>
        <div class="underline"></div>
      </li>
      <br><br>

      <h3>The Mysterious Temple :</h3><br>
      <h6>It's a first person puzzle, Exploration, horror and Survival game where there is a Detective 
        who enters the temple area to uncover the truth behind the temple but unfortunatly he got trapped 
        inside but still he continous his search for the truth and got in problems with the cursed spirits.
        In order to Survive he need to move forward and defeat the spirits.</h6><br>
      <div class="row project-images">
        <div class="col-md-4"><img src="photos/TMT-1.png" alt="The Mysterious Temple"></div>
        <div class="col-md-4"><img src="photos/TMT-2.png" alt="The Mysterious Temple"></div>
        <div class="col-md-4"><img src="photos/TMT-3.png" alt="The Mysterious Temple"></div>
      </div>
      <br>
      <li class="certificate-item">
        <span class="cert-title">click here to get the prototype video of the game ðŸ‘‰</span>
        <a href="https://youtu.be/sIOwnxSKKZc" target="_blank" class="btn-view">View</a>
        <div class="underline"></div>
      </li>
      <br><br>
    </section>

    <!-- Achievements -->
    <section id="achievements" class="achievement-container reveal parallax-section">
      <h3 class="section-title">Achievements</h3>
      <div class="achievement-content">
        <div class="achievement-text">
          <ul>
            <li>I've been Participated in the Game Jam Called "Scream jam 2025".</li>
            <li>There were total 7,499(approx.) Participated</li>
            <li>And which only 956 submitted the Game</li>
            <li>Out of which I Ranked 464 out of 956 submissions.</li>
          </ul>
        </div>
        <img src="photos/achievement.png" class="achievement-img">
      </div>
    </section>

    <!-- Skills -->
    <section id="skills" class="section-card reveal">
      <h3 class="section-title">Technical Skills</h3>
      <div class="d-flex justify-content-center gap-5 mb-5">
        <div class="text-center">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/unity/unity-original.svg" alt="unity" width="60">
          <div>Unity</div>
        </div>
        <div class="text-center">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/java/java-original.svg" alt="Java" width="60">
          <div>Java</div>
        </div>
        <div class="text-center">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" alt="Python" width="60">
          <div>Python</div>
        </div>
        <div class="text-center">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/csharp/csharp-original.svg" alt="C#" width="60">
          <div>C#</div>
        </div>
        <div class="text-center">
          <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/figma/figma-original.svg" alt="figma" width="60">
          <div>Figma</div>
        </div>
      </div>

      <h3 class="section-title mt-4">Soft Skills</h3>
      <div class="soft-skills">
        <span>â€¢ Creativity</span>
        <span>â€¢ Problem Solving</span>
        <span>â€¢ Attention to Detail</span>
        <span>â€¢ Adaptivity</span>
        <span>â€¢ Communication</span>
        <span>â€¢ Time Management</span>
      </div>
    </section>

    <!-- Certificates -->
    <section id="certificates" class="certificate-container reveal parallax-section">
      <h3 class="section-title">Certificates</h3>
      <ul class="certificate-list">
        <li>
          <span>Joy of Learning python</span>
          <a href="#" class="btn-view">View</a>
        </li>
        <li>
          <span>Build 5 playable 3D games in Unity 6 using C#.</span>
          <a href="#" class="btn-view">View</a>
        </li>
        <li>
          <span>A Step-by-Step Guide for Beginners to Design Web & Mobile Projects in Figma</span>
          <a href="#" class="btn-view">View</a>
        </li>
      </ul>
    </section>

    <!-- Contact -->
    <section id="contact" class="reveal parallax-section">
      <div class="container my-5" style="max-width: 700px;">
        <div class="p-5 rounded" style="background-color:#1a1a1a; color:#f5f5f5;">
          <h2 class="mb-4">Contact Me</h2>
          <form id="contactForm" action="https://formspree.io/f/xovngbja" method="POST">
            <div class="mb-3">
              <label for="name" class="form-label">Name</label>
              <input type="text" class="form-control w-50 custom-input" name="name" id="name" placeholder="Enter your name">
              <small class="error-text text-danger"></small>
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control w-50 custom-input" name="email" id="email" placeholder="Enter your email">
              <small class="error-text text-danger"></small>
            </div>
            <div class="mb-3">
              <label for="message" class="form-label">Message</label>
              <textarea class="form-control w-50 custom-textarea" name="message" id="message" rows="4" placeholder="Your message" ></textarea>
              <small class="error-text text-danger"></small>
            </div>
            <button type="submit" class="btn btn-submit">Submit</button>
          </form>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container text-center text-md-start">
        <div class="row">
          <div class="col-md-12">
            <p><i class="fa fa-phone"></i> Contact number: +91 962-480-1234</p>
            <p><i class="fa fa-envelope"></i> Email: anant@gmail.com</p>
            <p><i class="fa fa-map-marker"></i> Address: Ashopalav Society GIDC Main Road, Porbandde, 360225</p>
          </div>
        </div>
        <div class="text-center mt-3">
          <span class="made-by">Made By <span class="name">Anant Panjari</span></span>
        </div>
      </div>
    </footer>
  </div>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Starfield (keeps your original feel) -->
  <script>
    (function(){
      const canvas = document.getElementById('starfield');
      const ctx = canvas.getContext('2d');
      let stars = [], meteoroids = [];
      const numStars = 150, numMeteoroids = 5;
      let baseSpeed = 2;

      function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
      window.addEventListener('resize', resizeCanvas);
      resizeCanvas();

      for (let i=0; i<numStars; i++) {
        stars.push({
          x: Math.random()*canvas.width,
          y: Math.random()*canvas.height,
          radius: Math.random()*1.5+0.5,
          speed: Math.random()*0.5+0.1,
          opacity: Math.random()
        });
      }

      function initMeteoroids() {
        meteoroids = [];
        for (let i=0; i<numMeteoroids; i++) {
          const startX = Math.random() * canvas.width;
          meteoroids.push({
            x: startX,
            y: -Math.random()*50,
            length: Math.random()*20+10,
            speed: baseSpeed + Math.random(),
            opacity: Math.random()*0.5+0.5,
            angle: Math.random() * 0.5 + 0.3
          });
        }
      }
      initMeteoroids();

      function animate() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        stars.forEach(s=>{
          s.x+=s.speed;
          if(s.x>canvas.width) s.x=0;
          s.opacity += (Math.random()-0.5)*0.05;
          s.opacity = Math.max(0.3, Math.min(1, s.opacity));
          ctx.beginPath();
          ctx.arc(s.x,s.y,s.radius,0,Math.PI*2);
          ctx.fillStyle=`rgba(255,255,255,${s.opacity})`;
          ctx.fill();
        });

        meteoroids.forEach(m=>{
          m.x += m.speed * Math.cos(m.angle);
          m.y += m.speed * Math.sin(m.angle);
          if(m.x>canvas.width || m.y>canvas.height || m.x < -20) {
            m.x = Math.random() * canvas.width;
            m.y = -Math.random()*50;
            m.length = Math.random()*20+10;
            m.speed = baseSpeed + Math.random();
            m.opacity = Math.random()*0.5+0.5;
            m.angle = Math.random() * 0.5 + 0.3;
          }
          ctx.beginPath();
          ctx.moveTo(m.x, m.y);
          ctx.lineTo(m.x - m.length * Math.cos(m.angle), m.y - m.length * Math.sin(m.angle));
          ctx.strokeStyle=`rgba(255,255,255,${m.opacity})`;
          ctx.lineWidth=2;
          ctx.stroke();
        });

        requestAnimationFrame(animate);
      }

      window.addEventListener('resize', function() { resizeCanvas(); initMeteoroids(); });
      animate();
    })();
  </script>

  <!-- Reveal/parallax small scripts -->
  <script>
    const revealElements = document.querySelectorAll('.reveal');
    const revealOnScroll = new IntersectionObserver((entries) => {
      entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
    }, { threshold: 0.15 });
    revealElements.forEach(el => revealOnScroll.observe(el));

    const parallaxSections = document.querySelectorAll('.parallax-section');
    const parallaxObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
    }, { threshold: 0.2 });
    parallaxSections.forEach(sec => parallaxObserver.observe(sec));

    window.addEventListener("scroll", () => { document.body.style.setProperty('--scrollY', window.scrollY); });
  </script>

  <!-- Spaceships: three.js module -->
  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.module.js';
    import { GLTFLoader } from 'https://cdn.jsdelivr.net/npm/three@0.157.0/examples/jsm/loaders/GLTFLoader.js';

    // Canvas + renderer
    const shipCanvas = document.getElementById('spaceshipCanvas');
    // Ensure canvas sized properly (CSS sets width/height to 100%)
    function resizeCanvasToDisplaySize(canvas) {
      const width = window.innerWidth;
      const height = window.innerHeight;
      if (canvas.width !== width || canvas.height !== height) {
        canvas.width = width;
        canvas.height = height;
        return true;
      }
      return false;
    }
    resizeCanvasToDisplaySize(shipCanvas);

    const renderer = new THREE.WebGLRenderer({ canvas: shipCanvas, alpha: true, antialias: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
    renderer.setSize(window.innerWidth, window.innerHeight, false);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 4000);
    camera.position.z = 200;

    // lighting
    const ambientLight = new THREE.AmbientLight(0x404040, 1.2);
    scene.add(ambientLight);
    const dir = new THREE.DirectionalLight(0xffffff, 1.8);
    dir.position.set(100, 200, 300);
    scene.add(dir);

    const loader = new GLTFLoader();
    const shipModels = [
      'models/raven.glb',
      'models/harbinger.glb'
    ];

    // fallback simple ship if GLB fails
    function createFallbackShipMesh() {
      const g = new THREE.ConeGeometry(6, 24, 8);
      const m = new THREE.MeshPhongMaterial({ color: 0x66aaff });
      const mesh = new THREE.Mesh(g, m);
      mesh.rotation.x = Math.PI / 2;
      return mesh;
    }

    function spawnShip(direction = 'leftToRight') {
      const modelPath = shipModels[Math.floor(Math.random() * shipModels.length)];
      console.log('Attempt loading:', modelPath);
      loader.load(modelPath,
        (gltf) => {
          console.log('Loaded', modelPath);
          const ship = gltf.scene;
          // normalize scale (adjust if your model is very large/small)
          ship.scale.set(1.8, 1.8, 1.8);
          const randomY = Math.random() * 300 - 150;
          const randomZ = Math.random() * -200;

          let startX, endX;
          if (direction === 'leftToRight') { startX = -1400; endX = 1400; }
          else { startX = 1400; endX = -1400; ship.rotation.y = Math.PI; }

          ship.position.set(startX, randomY, randomZ);
          scene.add(ship);

          const speed = 2 + Math.random() * 2;
          const bobSpeed = Math.random() * 0.003 + 0.002;

          function animateShip(){
            if (!ship.parent) return;
            ship.position.x += direction === 'leftToRight' ? speed : -speed;
            ship.position.y += Math.sin(Date.now() * bobSpeed) * 0.4;
            if ((direction === 'leftToRight' && ship.position.x >= endX) ||
                (direction !== 'leftToRight' && ship.position.x <= endX)) {
              scene.remove(ship);
              return;
            }
            requestAnimationFrame(animateShip);
          }
          animateShip();
        },
        (progress) => {
          if (progress && progress.loaded && progress.total) {
            const pct = (progress.loaded / progress.total * 100).toFixed(1);
            console.log(`Loading ${modelPath}: ${pct}%`);
          }
        },
        (err) => {
          console.error('Failed to load', modelPath, err);
          // fallback
          const fallback = createFallbackShipMesh();
          const randomY = Math.random() * 300 - 150;
          const randomZ = Math.random() * -200;
          let startX, endX;
          if (direction === 'leftToRight') { startX = -1400; endX = 1400; }
          else { startX = 1400; endX = -1400; fallback.rotation.y = Math.PI; }
          fallback.position.set(startX, randomY, randomZ);
          scene.add(fallback);
          const speed = 2 + Math.random()*2;
          function animateFallback(){
            if (!fallback.parent) return;
            fallback.position.x += direction === 'leftToRight' ? speed : -speed;
            fallback.rotation.z = Math.sin(Date.now() * 0.003) * 0.1;
            if ((direction === 'leftToRight' && fallback.position.x >= endX) ||
                (direction !== 'leftToRight' && fallback.position.x <= endX)) {
              scene.remove(fallback);
              return;
            }
            requestAnimationFrame(animateFallback);
          }
          animateFallback();
        }
      );
    }

    // spawn pattern: every 3s spawn left->right and right->left with small offset
    setInterval(() => {
      spawnShip('leftToRight');
      setTimeout(() => spawnShip('rightToLeft'), 900);
    }, 3000);

    // initial
    spawnShip('leftToRight');
    setTimeout(()=> spawnShip('rightToLeft'), 1000);

    function renderLoop(){
      renderer.render(scene, camera);
      requestAnimationFrame(renderLoop);
    }
    renderLoop();

    // resize handler
    window.addEventListener('resize', () => {
      resizeCanvasToDisplaySize(shipCanvas);
      renderer.setSize(window.innerWidth, window.innerHeight, false);
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
    });

    // Expose for debugging
    window.__three_scene = scene;
  </script>

  <!-- Intro + speech + portal control -->
  <script>
    (function(){
  const overlay = document.getElementById('introOverlay');
  const bankaiText = document.getElementById('bankaiText');
  const infinityText = document.getElementById('infinityText');
  const introLine = document.getElementById("introLine");
  const main = document.getElementById('mainContent');

  function runIntro() {

    // BANKAI APPEAR
    bankaiText.style.transition = 'opacity 0.45s ease, transform 0.45s ease';
    bankaiText.style.opacity = '1';
    bankaiText.style.transform = 'scale(1.02)';

    // INFINITY SPACE APPEAR
    setTimeout(() => {
      infinityText.style.transition = 'opacity 0.45s ease, transform 0.45s ease';
      infinityText.style.opacity = '1';
      infinityText.style.transform = 'translateY(0)';
    }, 600);

    // LINE APPEARS AFTER INFINITY SPACE
    setTimeout(() => {
      introLine.classList.add("draw");
    }, 900);

    // GLASS SHATTER
    setTimeout(() => {
      document.getElementById("glassShatter").classList.add("active");
    }, 1800);

    // INTRO FADE OUT
    setTimeout(() => {
      overlay.style.opacity = 0;
    }, 2400);

    // SHOW MAIN CONTENT
    setTimeout(() => {
      overlay.style.display = 'none';
      main.style.visibility = 'visible';
      main.style.pointerEvents = 'auto';
    }, 2600);
  }

  runIntro();
})();
  </script>
    <script>
        function createShatterPieces() {
      const container = document.getElementById("glassShatter");
      for (let i = 0; i < 100; i++) {
        const piece = document.createElement("div");
        container.appendChild(piece);
      }
    }
    createShatterPieces();
    </script>
    <script>
    function scatterGlass() {
  const pieces = document.querySelectorAll("#glassShatter div");

  pieces.forEach((p) => {
    const x = (Math.random() - 0.5) * 600;
    const y = (Math.random() - 0.5) * 600;
    const r = (Math.random() - 0.5) * 180;

    p.style.transform = `translate(${x}px, ${y}px) rotate(${r}deg)`;
  });
}

setTimeout(() => {
  document.getElementById("glassShatter").classList.add("active");
  scatterGlass();
}, 1500);

  </script>
</body>
</html>